{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023/using-container-queries-news-layout/","result":{"data":{"site":{"siteMetadata":{"title":"CodeSpud","author":"@codespud"}},"markdownRemark":{"id":"615a85ba-e9ad-5c5c-9e24-3485f927ec68","excerpt":"When I hear media query I think about a bottle filled with liquids that don‚Äôt mix (e.g. oil and water). The content(water/oil) will assume‚Ä¶","html":"<p>When I hear media query I think about a bottle filled with liquids that don‚Äôt mix (e.g. oil and water). The content(water/oil) will assume the shape and size of the container (bottle). I will not bore you with ‚Äúscience-sy‚Äù stuff but some predetermined properties of these liquids define how they exist inside the bottle. Oil is lighter than water so it floats etc. But ultimately they are governed by their single container. You can‚Äôt make the oil shaped as a globe float inside of the region of water occupies. What if you have a glass sphere to contain the oil? Then made it so it is suspended inside the bottle? That is what container queries do for CSS. Container queries become the smaller glass container inside the bottle. Then your content can then follow the rules of that smaller container instead of depending on the rules of one bottle. This will allow you more flexibility in styling layouts.  </p>\n<blockquote>\n<p>Container queries enable you to apply styles to an element based on the size of the element‚Äôs container. If, for example, a container has less space available in the surrounding context, you can hide certain elements or use smaller fonts. </p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries\">MDN: Css Container queries</a></li>\n</ul>\n</blockquote>\n<p>For years, developers like me have asked for a better way of styling website elements, especially on where or how they are contained in a site. Media queries have their uses but they don‚Äôt help much if you want to make reusable independent components. Media queries are better suited for setting up page layouts. The dream is to have a UI element - drop it anywhere on the site and it reconfigures itself based on where and how the container is configured. Because you are using the container dimensions and not the viewport you can more accurately bake in the styling of a reusable element based on what available space the parent element has and not how wide the browser viewport is showing. Imagine the glass sphere in the bottle analogy earlier. Oil is the UI element and the glass sphere is the parent container. The UI element will not care how the rest of the page is configured. Only on how its parent is configured. To achieve this in the past developers resorted to JavaScript. You know how I hate adding more scripts to a page. Sometimes the convenience does not justify the added library size.  </p>\n<p>This is where container queries come in. They are the solution we‚Äôve been asking for all along. </p>\n<h2>How to do container queries</h2>\n<p>There are two steps to doing container queries.</p>\n<ol>\n<li>Make a wrapper element and setup <code class=\"language-text\">container</code> property</li>\n<li>Define styles in container query </li>\n</ol>\n<h3>1. Make a wrapper element and setup <code class=\"language-text\">container</code> property</h3>\n<p>To start using container queries, we first define a container or wrapper element with a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/container-type\">container type</a>. </p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.section-container </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">container</span><span class=\"token punctuation\">:</span> my-container <span class=\"token operator\">/</span> inline-size<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the CSS above, we are using the shorthand way of defining a container. The first value is the name we want to identify the container query the second value is the container type. It is equivalent to the CSS below.</p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.section-container </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">container-name</span><span class=\"token punctuation\">:</span> my-container<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">container-type</span><span class=\"token punctuation\">:</span> inline-size<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. Define styles in container query</h3>\n<p>A container query is similar to that a media query. </p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token atrule\"><span class=\"token rule\">@container</span> my-container <span class=\"token punctuation\">(</span><span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> 800px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// style here</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>These are the very minimum things you need to learn to use container queries. There are other things to know <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries#container_query_length_units\">container units</a> - I will leave that for a later post.</p>\n<h2>The experiment</h2>\n<p>To understand container queries better I did made an experiment. My idea was to create a news layout where the content is a bunch of cards with the same markup and content. Depending on how the container is configured the news cards will show in different ways. </p>\n<p>I made a wireframe with the following:</p>\n<ol>\n<li>Full-width hero card on top</li>\n<li>A medium-sized news card </li>\n<li>A news list with multiple content</li>\n<li>A grid with multiple contents</li>\n</ol>\n<img src=\"/blog/container-experiment.png\" alt=\"wireframe of news layout\">\n<p>I‚Äôve configured the cards in the wireframe to show in different styles. For the full-width top section ‚Äústage‚Äù, I want the card to show as a hero element. In the medium ‚Äústage‚Äù, the card would look like a wide news card. With the news list stage, I placed multiple cards that will show as a text list with no images. In the final grid ‚Äústage‚Äù, I wanted to show a news grid with multiple cards. </p>\n<p>Also not to forget, on smaller screens(e.g. mobile) all the cards will show as one column card grid.</p>\n<p>Remember that all these cards have the same markup. Imagine you have a server-side rendered(SSR) endpoint that returns an array of cards with similar markup sorted by descending date(e.g news post). Then you just drop all this content in different containers until you fill the layout. No need to cherry pick the data and render to different locations. </p>\n<p>Check the pen here for a demo.  </p>\n<p><a href=\"https://codepen.io/chrisbautista/pen/vYaxdXr\"><div><iframe \n        height='400' \n        scrolling='no' \n        src='//codepen.io/chrisbautista/embed/preview/vYaxdXr/?height=400&theme-id=dark&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<h2>What I learned</h2>\n<p>Doing the experiment I learned a few things. It is easy to start using container query after you get through the initial confusion in learning to think in containers.  Once you get used to thinking in container queries you‚Äôll be amazed. I was thinking it would be great if we had this a decade ago when we were building our layout editor.üòÄ</p>\n<p>You are not limited to querying width. If we use <code class=\"language-text\">container-type: size</code> we can use the container height when defining a container query block. Using height opens up more possibilities when doing layouts. For example, I made the news list text wall by using the height of the container to tell the news card to only render the text and hide the images. In some way, I made my news cards smarter. Before the container query era, I had to do some complicated CSS class combinations to achieve the same thing or worse yet use JavaScript.  </p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.stage </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">container-name</span><span class=\"token punctuation\">:</span> stage<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">container-type</span><span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@container</span> stage <span class=\"token punctuation\">(</span>width <span class=\"token operator\">></span> 768px<span class=\"token punctuation\">)</span> <span class=\"token operator\">and</span> <span class=\"token punctuation\">(</span>height = 1000px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.card </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>100% <span class=\"token operator\">/</span> 3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Wrapping up</h2>\n<p>Container queries are another great tool in a web developer‚Äôs toolbelt. I would recommend spending some time learning the basics and how it interacts with layout-specific CSS like flexbox and grids. I would also suggest spending time learning the differences between container types and how to use container units. </p>\n<p>Cheers!</p>","fields":{"slug":"/2023/using-container-queries-news-layout/"},"frontmatter":{"title":"Using Container Queries to Make a News Layout","date":"February 24, 2023","tags":["css","layout","frontend"],"featured_image":"/blog/artur-lysyuk-bottles-unsplash.jpg","featured_image_attribution":"photo by <a href=\"https://unsplash.com/@lisukartur\">Artur Lysyuk/a>","contentType":null}}},"pageContext":{"slug":"/2023/using-container-queries-news-layout/","tags":["css","layout","frontend"],"previous":{"fields":{"slug":"/2023/skip-button-js/"},"frontmatter":{"title":"Automatically generate skip buttons to improve accessibility","contentType":null,"tags":["accessibility","javascript","frontend"]}},"next":{"fields":{"slug":"/2023/testing-keyboard-accessibility/"},"frontmatter":{"title":"Testing Keyboard Accessibility","contentType":null,"tags":["accessibility","website-development","frontend"]}}}},"staticQueryHashes":["2139210123","63159454"]}